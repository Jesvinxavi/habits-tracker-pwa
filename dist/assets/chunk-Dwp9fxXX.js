const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-D8P7fKnl.js","assets/chunk-97VqPUVn.js","assets/chunk-1sPJXvOa.js","assets/chunk-CM0JCX04.js"])))=>i.map(i=>d[i]);
import{_ as t,g as e}from"./chunk-D8P7fKnl.js";import{c as n,o as a}from"./chunk-97VqPUVn.js";import{d as s,u as i,a as d,g as o,b as r,r as l,c}from"./chunk-1sPJXvOa.js";import{n as u,f as g}from"./chunk-CM0JCX04.js";const y={_validateForm:null,openAddMode(){this._setupEventHandlers();const t=document.getElementById("add-activity-form");t&&t.reset();const n=document.getElementById("delete-activity-btn");n&&n.classList.add("hidden");const s=document.querySelector("#add-activity-modal h2");s&&(s.textContent="New Activity");const i=document.getElementById("save-add-activity");i&&(i.textContent="Add");const d=document.getElementById("add-activity-modal");d&&(delete d.dataset.editActivityId,delete d.dataset.editMode),this._setSelectedActivityIcon("üèÉ‚Äç‚ôÇÔ∏è",!1),this._userManuallySelectedIcon=!1;let o=document.getElementById("activity-selected-icon-display");o&&(o.textContent=this._getSelectedActivityIcon());const r=document.getElementById("muscle-group-section"),l=document.getElementById("muscle-group-select");r&&r.classList.add("hidden"),l&&(l.value="");const c=document.getElementById("units-section"),u=document.getElementById("units-select");c&&c.classList.add("hidden"),u&&(u.value="none");const g=document.getElementById("activity-category-select");g&&(g.innerHTML='<option value="" disabled selected>Select a category</option>'+e().activityCategories.map(t=>`<option value="${t.id}">${t.icon} ${t.name}</option>`).join("")),a("add-activity-modal"),setTimeout(()=>{this._setupActivityIconPicker(),this._initializeTrackingTypeToggles(),this._setupFormValidation()},50),this._validateForm&&this._validateForm()},openEditMode(t){const n=o(t);if(!n)return void console.error("Activity not found:",t);const s=document.getElementById("add-activity-form");s&&s.reset();const i=document.getElementById("activity-name-input"),d=document.getElementById("activity-category-select"),r=document.getElementById("muscle-group-select"),l=document.getElementById("muscle-group-section");i&&(i.value=n.name),d&&(d.innerHTML='<option value="" disabled>Select a category</option>'+e().activityCategories.map(t=>`<option value="${t.id}" ${t.id===n.categoryId?"selected":""}>${t.icon} ${t.name}</option>`).join("")),"strength"===n.categoryId&&n.muscleGroup?(l&&l.classList.remove("hidden"),r&&(r.value=n.muscleGroup)):l&&l.classList.add("hidden");const c=n.icon||"üèÉ‚Äç‚ôÇÔ∏è",u=e().activityCategories.find(t=>t.id===n.categoryId),g=u&&c!==u.icon;this._setSelectedActivityIcon(c,g),this._userManuallySelectedIcon=g;const y=document.getElementById("activity-selected-icon-display");y&&(y.textContent=this._getSelectedActivityIcon());const v=n.trackingType||"time";if(this._setSelectedTrackingType(v),"sets-reps"===v){const t=document.getElementById("units-section"),e=document.getElementById("units-select");t&&t.classList.remove("hidden"),e&&(e.value=n.units||"none")}else{const t=document.getElementById("units-section"),e=document.getElementById("units-select");t&&t.classList.add("hidden"),e&&(e.value="none")}const m=document.getElementById("delete-activity-btn");m&&(m.classList.remove("hidden"),m.dataset.listenerAttached||(m.addEventListener("click",e=>{e.preventDefault(),this._handleDeleteActivity(t)}),m.dataset.listenerAttached="true"));const p=document.querySelector("#add-activity-modal h2");p&&(p.textContent="Edit Activity");const x=document.getElementById("save-add-activity");x&&(x.textContent="Update");const h=document.getElementById("add-activity-modal");h&&(h.dataset.editActivityId=t,h.dataset.editMode="true"),a("add-activity-modal"),setTimeout(()=>{this._setupEventHandlers(),this._setupActivityIconPicker(),this._initializeTrackingTypeToggles(),this._setupFormValidation()},50),this._validateForm&&this._validateForm()},_setupEventHandlers(){const t=document.getElementById("cancel-add-activity");t&&!t.dataset.listenerAttached&&(t.addEventListener("click",()=>{n("add-activity-modal")}),t.dataset.listenerAttached="true"),this._setupActivityIconPicker(),this._setupFormValidation()},_setupActivityIconPicker(){const t=document.getElementById("activity-icon-selector-btn"),e=document.getElementById("icon-selection-modal");let s=document.getElementById("activity-selected-icon-display");if(!t||!e||!s)return;const i=t.cloneNode(!0);t.parentNode.replaceChild(i,t);const d=i.querySelector("#activity-selected-icon-display")||document.getElementById("activity-selected-icon-display");s=d,i.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this._buildActivityIconGrid(e),a("icon-selection-modal")}),e.addEventListener("click",t=>{t.target===e&&n("icon-selection-modal")});const o=document.getElementById("select-icon"),r=document.getElementById("cancel-icon");e.addEventListener("click",t=>{const n=t.target.closest(".icon-option");if(!n)return;const a=n.dataset.icon||"üèÉ‚Äç‚ôÇÔ∏è";this._setSelectedActivityIcon(a,!0),s.textContent=a,e.querySelectorAll(".icon-option").forEach(t=>t.classList.remove("ring","ring-ios-blue","ring-2")),n.classList.add("ring","ring-ios-blue","ring-2"),o&&(o.disabled=!1)}),o&&o.addEventListener("click",()=>{s.textContent=this._getSelectedActivityIcon(),n("icon-selection-modal")}),r&&r.addEventListener("click",()=>{n("icon-selection-modal")})},_setupFormValidation(){const t=document.getElementById("add-activity-form"),e=document.getElementById("activity-name-input"),n=document.getElementById("activity-category-select"),a=document.getElementById("save-add-activity");this._validateForm=()=>{const t=e&&e.value.trim().length>0,s=n&&n.value,i=n&&"strength"===n.value,d=document.getElementById("muscle-group-select"),o=!i||d&&d.value,r=t&&s&&o;a&&(a.disabled=!r,a.classList.toggle("opacity-50",a.disabled))},e&&e.addEventListener("input",this._validateForm),n&&(n.addEventListener("change",this._validateForm),n.addEventListener("change",()=>this._updateActivityIconFromCategory()),n.addEventListener("change",()=>this._initializeTrackingTypeToggles()),n.addEventListener("change",()=>this._handleMuscleGroupVisibility()));const s=document.getElementById("muscle-group-select");s&&s.addEventListener("change",this._validateForm),a&&!a.dataset.listenerAttached&&(a.addEventListener("click",t=>{t.preventDefault(),this._handleFormSubmit()}),a.dataset.listenerAttached="true"),t&&!t.dataset.listenerAttached&&(t.addEventListener("submit",t=>{t.preventDefault(),this._handleFormSubmit()}),t.dataset.listenerAttached="true")},_handleFormSubmit(){const t=document.getElementById("activity-name-input"),e=document.getElementById("activity-category-select"),a=document.getElementById("muscle-group-select");if(!t||!e)return;const s=t.value.trim(),o=e.value,r=this._getSelectedActivityIcon(),l="strength"===o&&a?a.value:null,c=this._getSelectedTrackingType(),u={name:s,categoryId:o,icon:r,muscleGroup:l,trackingType:c,units:"sets-reps"===c?document.getElementById("units-select")?.value||"none":null},g=document.getElementById("add-activity-modal"),y=g?.dataset.editActivityId;y?i(y,u):d(u),n("add-activity-modal")},_selectedActivityIcon:"üèÉ‚Äç‚ôÇÔ∏è",_selectedTrackingType:"time",_userManuallySelectedIcon:!1,_getSelectedActivityIcon(){return this._selectedActivityIcon},_setSelectedActivityIcon(t,e=!1){this._selectedActivityIcon=t,e&&(this._userManuallySelectedIcon=!0)},_getSelectedTrackingType(){return this._selectedTrackingType},_setSelectedTrackingType(t){this._selectedTrackingType=t},_buildActivityIconGrid(t){const e=t.querySelector("#activity-icon-grid");e&&(e.innerHTML="",["üí™","üèÉ","üö¥","üèä","üßò","‚öñÔ∏è","üçé","ü•ó","üíß","‚òï","ü•õ","üçä","üìö","üìñ","‚úèÔ∏è","üéì","üí°","üß†","üíº","üíª","üì±","üìä","üìù","üìã","üò¥","üõèÔ∏è","üåô","‚è∞","üïê","‚è±Ô∏è","üéµ","üé∏","üé®","üì∑","üéÆ","üéØ","üå±","üå≥","üå∏","üåû","üåç","‚ôªÔ∏è","üë•","üë™","‚ù§Ô∏è","ü§ù","üìû","üí¨","üßº","ü™•","üöø","üíä","üß¥","üéØ","‚úàÔ∏è","üöó","üö∂","üó∫Ô∏è","üéí","üìç","üí∞","üí≥","üíé","üìà","üè¶","üí∏","‚≠ê","üéâ","üî•","‚ö°","‚ú®","üöÄ"].forEach(t=>{const n=document.createElement("button");n.className="icon-option w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-xl hover:bg-ios-blue hover:text-white transition-all duration-200 hover:scale-105",n.dataset.icon=t,n.textContent=t,n.addEventListener("click",()=>{this._setSelectedActivityIcon(t,!0);const e=document.getElementById("activity-selected-icon-display");e&&(e.textContent=t)}),e.appendChild(n)}))},_updateActivityIconFromCategory(){const e=document.getElementById("activity-category-select");if(e&&e.value&&!this._userManuallySelectedIcon){const n=e.value;t(async()=>{const{getState:t}=await import("./chunk-D8P7fKnl.js").then(t=>t.k);return{getState:t}},__vite__mapDeps([0,1,2,3])).then(({getState:t})=>{const e=t().activityCategories.find(t=>t.id===n);if(e&&e.icon){this._setSelectedActivityIcon(e.icon,!1);const t=document.getElementById("activity-selected-icon-display");t&&(t.textContent=e.icon)}})}},_initializeTrackingTypeToggles(){const t=document.getElementById("sets-reps-toggle"),e=document.getElementById("time-toggle"),n=document.getElementById("activity-category-select"),a=document.getElementById("units-section");if(!t||!e)return;const s=()=>{const s=n?.value,i=this._getSelectedTrackingType();"sports"===s?(this._setSelectedTrackingType("time"),t.disabled=!0,e.disabled=!0,t.classList.add("opacity-50","cursor-not-allowed"),e.classList.add("opacity-50","cursor-not-allowed")):"strength"===s&&"time"===i?(this._setSelectedTrackingType("sets-reps"),t.disabled=!1,e.disabled=!1,t.classList.remove("opacity-50","cursor-not-allowed"),e.classList.remove("opacity-50","cursor-not-allowed")):(t.disabled=!1,e.disabled=!1,t.classList.remove("opacity-50","cursor-not-allowed"),e.classList.remove("opacity-50","cursor-not-allowed")),"sets-reps"===i?(t.classList.add("bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-600","shadow-sm"),t.classList.remove("text-gray-600","dark:text-gray-400"),e.classList.remove("bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-600","shadow-sm"),e.classList.add("text-gray-600","dark:text-gray-400"),a&&a.classList.remove("hidden")):(e.classList.add("bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-600","shadow-sm"),e.classList.remove("text-gray-600","dark:text-gray-400"),t.classList.remove("bg-white","dark:bg-gray-700","text-gray-900","dark:text-white","border","border-gray-200","dark:border-gray-600","shadow-sm"),t.classList.add("text-gray-600","dark:text-gray-400"),a&&a.classList.add("hidden"))};t.dataset.listenerAttached||(t.addEventListener("click",()=>{const t=n?.value;"sports"!==t&&(this._setSelectedTrackingType("sets-reps"),s())}),t.dataset.listenerAttached="true"),e.dataset.listenerAttached||(e.addEventListener("click",()=>{const t=n?.value;"sports"!==t&&(this._setSelectedTrackingType("time"),s())}),e.dataset.listenerAttached="true"),n&&!n.dataset.toggleListenerAttached&&(n.addEventListener("change",s),n.dataset.toggleListenerAttached="true"),s()},_handleDeleteActivity(t){if(confirm("Are you sure you want to delete this activity? This action cannot be undone.")){s(t),n("add-activity-modal");const e=new CustomEvent("ActivityDeleted",{detail:{activityId:t}});document.dispatchEvent(e)}},_handleMuscleGroupVisibility(){const t=document.getElementById("activity-category-select"),e=document.getElementById("muscle-group-section"),n=document.getElementById("muscle-group-select");if(!t||!e)return;"strength"===t.value?(e.classList.remove("hidden"),n&&(n.required=!0)):(e.classList.add("hidden"),n&&(n.required=!1,n.value=""))}},v={open(t){const e=o(t);if(!e)return;const n=c(e.categoryId);this._populateActivityInfo(e,n),this._setupTrackingSection(e),this._storeActivityId(t),this._setupEventHandlers(),this._resetForm(),a("activity-details-modal")},openWithRecord(t,e){const n=o(t);if(!n)return;const s=c(n.categoryId);this._populateActivityInfo(n,s),this._setupTrackingSection(n),this._storeActivityId(t),this._storeRecordId(e.id),this._setEditMode(!0),this._populateRecordData(e),this._setupEventHandlers(),a("activity-details-modal")},_populateActivityInfo(t,e){const n=document.getElementById("activity-details-icon"),a=document.getElementById("activity-details-name"),s=document.getElementById("activity-details-category");n&&(n.textContent=t.icon||e.icon,n.style.backgroundColor=`${e.color}20`),a&&(a.textContent=t.name),s&&(s.textContent=e.name)},_setupTrackingSection(t){const e=document.getElementById("sets-reps-tracking-section"),n=document.getElementById("time-tracking-section");"sets-reps"===t.trackingType?(e&&e.classList.remove("hidden"),n&&n.classList.add("hidden")):(e&&e.classList.add("hidden"),n&&n.classList.remove("hidden"))},_storeActivityId(t){const e=document.getElementById("activity-details-modal");e&&(e.dataset.activityId=t)},_storeRecordId(t){const e=document.getElementById("activity-details-modal");e&&(e.dataset.recordId=t)},_setEditMode(t){const e=document.getElementById("activity-details-modal");e&&(e.dataset.editMode=t.toString())},_populateRecordData(t){if(t.sets&&t.sets.length>0)this._clearSets(),t.sets.forEach((t,e)=>{if(0===e){this._addNewSet(t.unit||"none");const e=document.querySelector('[data-set-id="set-1"]');if(e){const n=e.querySelector('input[name="reps-set-1"]'),a=e.querySelector('input[name="value-set-1"]'),s=e.querySelector('select[name="unit-set-1"]');n&&(n.value=t.reps||""),a&&(a.value=t.value||""),s&&(s.value=t.unit||"none")}}else{this._addNewSet(t.unit||"none");const n=`set-${e+1}`,a=document.querySelector(`[data-set-id="${n}"]`);if(a){const e=a.querySelector(`input[name="reps-${n}"]`),s=a.querySelector(`input[name="value-${n}"]`),i=a.querySelector(`select[name="unit-${n}"]`);e&&(e.value=t.reps||""),s&&(s.value=t.value||""),i&&(i.value=t.unit||"none")}}});else{const e=document.getElementById("activity-duration-input"),n=document.getElementById("duration-unit-select"),a=document.getElementById("activity-intensity-select");e&&(e.value=t.duration||""),n&&(n.value=t.durationUnit||"minutes"),a&&(a.value=t.intensity||"")}const e=document.getElementById("activity-notes-input");e&&(e.value=t.notes||"")},_resetForm(){const t=document.getElementById("activity-details-form");t&&t.reset(),this._clearSets();const e=document.getElementById("activity-details-modal"),n=e?.dataset.activityId;if(n){const t=o(n);t&&"sets-reps"===t.trackingType&&this._addNewSet(t.units||"none")}},_bindSaveHandler(){const t=document.getElementById("save-activity-details");t&&!t.dataset.listenerAttached&&(t.addEventListener("click",t=>{t.preventDefault(),this._handleSave()}),t.dataset.listenerAttached="true")},_bindCancelHandler(){const t=document.getElementById("cancel-activity-details");t&&t.addEventListener("click",()=>{n("activity-details-modal")})},_bindSetsHandlers(){const t=document.getElementById("add-set-btn");t&&t.addEventListener("click",()=>{const t=document.getElementById("activity-details-modal"),e=t?t.dataset.activityId:null;if(!e)return;const n=o(e);n?this._addNewSet(n.units||"none"):this._addNewSet("none")});const e=document.getElementById("sets-container");e&&e.addEventListener("click",t=>{if(t.target.classList.contains("remove-set-btn")){const e=t.target.dataset.setId;this._removeSet(e)}})},_handleSave(){const a=document.getElementById("activity-details-modal");if(!a)return;const s=a.dataset.activityId,i=a.dataset.recordId,d="true"===a.dataset.editMode,c=o(s);if(!c)return;const u=this._collectRecordData(c);u?t(async()=>{const{getLocalISODate:t}=await import("./chunk-CM0JCX04.js").then(t=>t.A);return{getLocalISODate:t}},__vite__mapDeps([3,0,1,2])).then(({getLocalISODate:t})=>{const a=t(e().fitnessSelectedDate||(new Date).toISOString());d&&i?r(i,a,u):l(s,a,u),n("activity-details-modal");const o=new CustomEvent("ActivityRecorded",{detail:{activityId:s,recordData:u}});document.dispatchEvent(o)}):console.warn("No valid data collected, not saving activity")},_collectRecordData(t){const e={timestamp:(new Date).toISOString(),notes:document.getElementById("activity-notes-input")?.value||""};if("sets-reps"===t.trackingType){if(e.sets=this._collectSetsData(),!e.sets||0===e.sets.length)return console.warn("No valid sets found for sets-reps activity"),null}else{const t=document.getElementById("activity-duration-input")?.value,n=document.getElementById("duration-unit-select")?.value,a=document.getElementById("activity-intensity-select")?.value;if(!t||""===t.trim())return console.warn("No duration provided for time-based activity"),null;e.duration=t,e.durationUnit=n||"minutes",a&&(e.intensity=a)}return e},_collectSetsData(){const t=[];return document.querySelectorAll(".set-item").forEach((e,n)=>{const a=`set-${n+1}`,s=e.querySelector(`input[name="reps-${a}"]`),i=e.querySelector(`input[name="value-${a}"]`),d=e.querySelector(`select[name="unit-${a}"]`),o=s&&s.value?parseInt(s.value):null,r=i&&i.value?parseFloat(i.value):null,l=d?d.value:"none";o&&t.push({reps:o,value:r,unit:l})}),t},_clearSets(){const t=document.getElementById("sets-container");t&&(t.innerHTML="")},_addNewSet(t="none"){const e=document.getElementById("sets-container");if(!e)return;const n=e.children.length+1,a=`set-${n}`,s=document.createElement("div");s.className="set-item p-4 bg-gray-50 dark:bg-gray-700 rounded-xl space-y-3",s.dataset.setId=a,s.innerHTML=`\n      <div class="flex items-center justify-between">\n        <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Set ${n}</label>\n        ${n>1?`<button type="button" class="remove-set-btn text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200 p-1" data-set-id="${a}">\n          <span class="material-icons text-red-600 text-base">delete</span>\n        </button>`:""}\n      </div>\n      <div class="grid grid-cols-3 gap-2">\n        <div>\n          <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1">Reps</label>\n          <input type="number" name="reps-${a}" min="1" max="999" placeholder="12" class="w-full px-3 py-2 bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 rounded-lg text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-ios-blue/50 h-10 text-center">\n        </div>\n        <div>\n          <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1">Value</label>\n          <input type="number" name="value-${a}" min="0" step="0.1" placeholder="50" class="w-full px-3 py-2 bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 rounded-lg text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-ios-blue/50 h-10 text-center">\n        </div>\n        <div>\n          <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1">Unit</label>\n          <select name="unit-${a}" class="w-full px-3 py-2 bg-white dark:bg-gray-600 border border-gray-200 dark:border-gray-500 rounded-lg text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-ios-blue/50 h-10" style="text-align: center; text-align-last: center;">\n            <option value="none" ${"none"===t?"selected":""}>None</option>\n            <option value="kg" ${"kg"===t?"selected":""}>Kg</option>\n            <option value="seconds" ${"seconds"===t?"selected":""}>s</option>\n            <option value="minutes" ${"minutes"===t?"selected":""}>Mins</option>\n          </select>\n        </div>\n      </div>\n    `,e.appendChild(s);const i=s.querySelector(".remove-set-btn");i&&i.addEventListener("click",()=>{this._removeSet(a)})},_removeSet(t){const e=document.querySelector(`[data-set-id="${t}"]`);e&&(e.remove(),this._renumberSets())},_renumberSets(){const t=document.getElementById("sets-container");if(!t)return;t.querySelectorAll(".set-item").forEach((t,e)=>{const n=e+1,a=`set-${n}`;t.dataset.setId=a;const s=t.querySelector("label");s&&(s.textContent=`Set ${n}`);const i=t.querySelector('input[name^="reps-"]'),d=t.querySelector('input[name^="value-"]'),o=t.querySelector('select[name^="unit-"]');i&&(i.name=`reps-${a}`),d&&(d.name=`value-${a}`),o&&(o.name=`unit-${a}`);const r=t.querySelector(".remove-set-btn");r&&(r.dataset.setId=a),1===n?r&&(r.style.display="none"):r&&(r.style.display="block")})},_setupEventHandlers(){this._bindSaveHandler(),this._bindCancelHandler(),this._bindSetsHandlers()}};function m(t,n,a){if(0===n.totalSessions)return'\n      <div class="text-center py-8">\n        <span class="material-icons text-4xl text-gray-400 mb-4">bar_chart</span>\n        <p class="text-gray-600 dark:text-gray-400">No recorded sessions yet</p>\n        <p class="text-sm text-gray-500 mt-2">Start tracking this activity to see statistics</p>\n      </div>\n    ';let s=`\n    <div class="stats-grid space-y-4">\n      \x3c!-- Overview Stats --\x3e\n      <div class="stats-section">\n        <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Overview</h4>\n        <div class="grid grid-cols-2 gap-4">\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-2xl font-bold text-gray-900 dark:text-white">${n.totalSessions}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Total Sessions</div>\n          </div>\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-2xl font-bold text-gray-900 dark:text-white">${n.weeklyAverage.toFixed(1)}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Per Week Average</div>\n          </div>\n        </div>\n      </div>\n  `;if("sets-reps"===t.trackingType){s+=`\n      <div class="stats-section">\n        <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Strength Metrics</h4>\n        <div class="grid grid-cols-2 gap-4">\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-xl font-bold text-gray-900 dark:text-white">${n.totalSets}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Total Sets</div>\n          </div>\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-xl font-bold text-gray-900 dark:text-white">${n.totalReps}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Total Reps</div>\n          </div>\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-xl font-bold text-gray-900 dark:text-white">${n.averageSets.toFixed(1)}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Avg Sets/Session</div>\n          </div>\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-xl font-bold text-gray-900 dark:text-white">${n.averageReps.toFixed(1)}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Avg Reps/Session</div>\n          </div>\n        </div>\n        ${n.totalVolume>0?`\n        <div class="mt-4">\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-xl font-bold text-gray-900 dark:text-white">${n.totalVolume.toFixed(1)}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Total Volume (weight √ó reps)</div>\n          </div>\n        </div>\n      `:""}\n      </div>\n    `;const i=function(t){const n=o(t);if(!n||"sets-reps"!==n.trackingType)return[];const a=[];if(Object.values(e().recordedActivities||{}).forEach(e=>{e.forEach(e=>{e.activityId===t&&a.push(e)})}),0===a.length)return[];a.sort((t,e)=>new Date(t.timestamp)-new Date(e.timestamp));const s=[];return a.forEach(t=>{if(!t.sets||0===t.sets.length)return;const e=Math.max(...t.sets.map(t=>{const e=parseFloat(t.value);return isNaN(e)?0:e}),0),n=t.date;s.push({date:n,value:e})}),s}(t.id);i.length>1&&(s+=`\n        <div class="mt-6">\n          <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Progression</h4>\n          <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            ${function(t,n="#3b82f6",a=null){if(!t||t.length<2)return"";const s=320,i=200,d={top:20,right:30,bottom:50,left:70},o=s-d.left-d.right,r=i-d.top-d.bottom,l=Math.max(...t.map(t=>t.value)),c=Math.min(...t.map(t=>t.value)),u=l===c?1:l-c,g=Math.max(0,c-.1*u),y=l+.1*u-g,v=4,m=[];for(let e=0;e<=v;e++){const t=g+e*y/v;m.push(Math.round(10*t)/10)}const p=t.map((e,n)=>{const a=d.left+n/(t.length-1)*o,s=d.top+r-(e.value-g)/y*r;return`${a.toFixed(1)},${s.toFixed(1)}`}).join(" "),x=t.map((e,a)=>`<circle cx="${d.left+a/(t.length-1)*o}" cy="${d.top+r-(e.value-g)/y*r}" r="4" fill="${n}" stroke="white" stroke-width="2"/>`).join(""),h=m.map((t,e)=>{const n=d.top+r-e/(m.length-1)*r;return`\n        <line x1="${d.left}" y1="${n}" x2="${d.left+o}" y2="${n}" stroke="#e5e7eb" stroke-width="1" opacity="0.5"/>\n        <text x="${d.left-8}" y="${n+4}" text-anchor="end" font-size="11" font-weight="500" fill="currentColor" class="text-gray-700 dark:text-gray-300">${t}</text>\n      `}).join(""),b=t.length>8?Math.ceil(t.length/6):1,f=t.map((e,n)=>{if(n%b!==0&&n!==t.length-1&&0!==n)return"";const a=d.left+n/(t.length-1)*o,s=d.top+r+20,i=new Date(e.date),l=`${i.getDate().toString().padStart(2,"0")}/${(i.getMonth()+1).toString().padStart(2,"0")}`;return`\n        <line x1="${a}" y1="${d.top+r}" x2="${a}" y2="${d.top+r+6}" stroke="currentColor" stroke-width="1" class="text-gray-400"/>\n        <text x="${a}" y="${s}" text-anchor="middle" font-size="10" font-weight="500" fill="currentColor" class="text-gray-700 dark:text-gray-300">${l}</text>\n      `}).join(""),k=a?function(t){const n=[];Object.values(e().recordedActivities||{}).forEach(e=>{e.forEach(e=>{e.activityId===t&&e.sets&&n.push(e)})});for(let e=n.length-1;e>=0;e--){const t=n[e];if(t.sets&&t.sets.length>0){const e=t.sets.find(t=>t.unit&&"none"!==t.unit);if(e&&e.unit)return e.unit}}return"lbs"}(a.id):"lbs";return`\n    <div class="w-full">\n      <svg viewBox="0 0 ${s} ${i}" class="w-full h-40 text-gray-600 dark:text-gray-400">\n        \x3c!-- Y-axis grid lines and labels --\x3e\n        ${h}\n        \n        \x3c!-- X-axis --\x3e\n        <line x1="${d.left}" y1="${d.top+r}" x2="${d.left+o}" y2="${d.top+r}" stroke="currentColor" stroke-width="2" class="text-gray-500"/>\n        \n        \x3c!-- Y-axis --\x3e\n        <line x1="${d.left}" y1="${d.top}" x2="${d.left}" y2="${d.top+r}" stroke="currentColor" stroke-width="2" class="text-gray-500"/>\n        \n        \x3c!-- X-axis labels and tick marks --\x3e\n        ${f}\n        \n        \x3c!-- Y-axis label (vertical) --\x3e\n        <text x="15" y="${d.top+r/2}" text-anchor="middle" font-size="11" font-weight="600" fill="currentColor" class="text-gray-700 dark:text-gray-300" transform="rotate(-90, 15, ${d.top+r/2})">Max Weight (${k})</text>\n        \n        \x3c!-- X-axis label (horizontal) --\x3e\n        <text x="${d.left+o/2}" y="${i-10}" text-anchor="middle" font-size="11" font-weight="600" fill="currentColor" class="text-gray-700 dark:text-gray-300">Session Dates</text>\n        \n        \x3c!-- Data line with gradient effect --\x3e\n        <defs>\n          <linearGradient id="lineGradient-${a?.id||"default"}" x1="0%" y1="0%" x2="100%" y2="0%">\n            <stop offset="0%" style="stop-color:${n};stop-opacity:0.8" />\n            <stop offset="100%" style="stop-color:${n};stop-opacity:1" />\n          </linearGradient>\n        </defs>\n        \n        \x3c!-- Data line --\x3e\n        <polyline\n          fill="none"\n          stroke="url(#lineGradient-${a?.id||"default"})"\n          stroke-width="3"\n          stroke-linecap="round"\n          stroke-linejoin="round"\n          points="${p}"/>\n        \n        \x3c!-- Data points --\x3e\n        ${x}\n      </svg>\n    </div>\n  `}(i,a.color,t)}\n          </div>\n        </div>`)}else s+=`\n      <div class="stats-section">\n        <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Duration Metrics</h4>\n        <div class="grid grid-cols-2 gap-4">\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-xl font-bold text-gray-900 dark:text-white">${u(n.totalDuration)}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Total Duration</div>\n          </div>\n          <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n            <div class="stat-value text-xl font-bold text-gray-900 dark:text-white">${u(n.averageDuration)}</div>\n            <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Avg Duration</div>\n          </div>\n        </div>\n        ${n.mostCommonIntensity?`\n          <div class="mt-4">\n            <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n              <div class="stat-value text-lg font-bold text-gray-900 dark:text-white capitalize">${n.mostCommonIntensity}</div>\n              <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Most Common Intensity</div>\n            </div>\n          </div>\n        `:""}\n      </div>\n    `;return s+=`\n    <div class="stats-section">\n      <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Recent Activity</h4>\n      <div class="grid grid-cols-2 gap-4">\n        <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n          <div class="stat-value text-xl font-bold text-gray-900 dark:text-white">${n.recentFrequency}</div>\n          <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Last 30 Days</div>\n        </div>\n        <div class="stat-card bg-gray-50 dark:bg-gray-700 p-3 rounded-lg">\n          <div class="stat-value text-sm font-bold text-gray-900 dark:text-white">${g(n.lastPerformed)}</div>\n          <div class="stat-label text-xs text-gray-500 dark:text-gray-400">Last Performed</div>\n        </div>\n      </div>\n    </div>\n  `,n.bestSession&&(s+=`\n      <div class="stats-section">\n        <h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Best Session</h4>\n        <div class="stat-card bg-gradient-to-r from-${a.color.slice(1)} to-${a.color.slice(1)} bg-opacity-10 p-4 rounded-lg border-2" style="border-color: ${a.color}40;">\n          ${function(t,e){if("sets-reps"===e.trackingType&&t.sets){const e=t.sets.reduce((t,e)=>t+(parseFloat(e.value)||0)*(parseInt(e.reps)||0),0),n=Math.max(...t.sets.map(t=>parseFloat(t.value)||0));return`\n      <div class="text-sm font-semibold text-gray-900 dark:text-white">\n        ${t.sets.length} sets ‚Ä¢ ${e.toFixed(1)} volume\n      </div>\n      <div class="text-xs text-gray-600 dark:text-gray-300">\n        Max weight: ${n}${"none"!==t.sets[0]?.unit&&t.sets[0]?.unit||""}\n      </div>\n    `}{let e="";if(t.duration){let n=t.duration,a=t.durationUnit||"minutes";"hours"===a?(n*=60,a="minutes"):"seconds"===a&&(n=Math.round(n/60),a="minutes"),e=`${n} ${"minutes"===a?"min":a}`}return`\n      <div class="text-sm font-semibold text-gray-900 dark:text-white">\n        ${e}${t.intensity?` ‚Ä¢ ${t.intensity} intensity`:""}\n      </div>\n      <div class="text-xs text-gray-600 dark:text-gray-300">\n        Longest duration session\n      </div>\n    `}}(n.bestSession,t)}\n          <div class="text-xs text-gray-500 dark:text-gray-400 mt-2">\n            ${new Date(n.bestSession.timestamp).toLocaleDateString()}\n          </div>\n        </div>\n      </div>\n    `),s+="</div>",s}const p={open(t){const n=this._getActivity(t);if(!n)return;const a=function(t){const n=o(t);if(!n)return null;const a=[];if(Object.values(e().recordedActivities||{}).forEach(e=>{e.forEach(e=>{e.activityId===t&&a.push(e)})}),0===a.length)return{totalSessions:0,totalDuration:0,totalSets:0,totalReps:0,totalVolume:0,averageDuration:0,averageSets:0,averageReps:0,mostCommonIntensity:null,lastPerformed:null,bestSession:null,recentFrequency:0,weeklyAverage:0};a.sort((t,e)=>new Date(t.timestamp)-new Date(e.timestamp));const s={totalSessions:a.length,totalDuration:0,totalSets:0,totalReps:0,totalVolume:0,averageDuration:0,averageSets:0,averageReps:0,mostCommonIntensity:null,lastPerformed:a[a.length-1].timestamp,bestSession:null,recentFrequency:0,weeklyAverage:0};if("sets-reps"===n.trackingType){let t=0,e=null;a.forEach(n=>{n.sets&&n.sets.length>0&&(s.totalSets+=n.sets.length,n.sets.forEach(a=>{if(a.reps&&(s.totalReps+=parseInt(a.reps)||0),a.value&&a.unit&&"none"!==a.unit){const i=(parseFloat(a.value)||0)*(parseInt(a.reps)||0);s.totalVolume+=i,i>t&&(t=i,e=n)}}))}),s.averageSets=s.totalSets/s.totalSessions,s.averageReps=s.totalReps/s.totalSessions,s.bestSession=e}else{const t={};let e=0,n=null;a.forEach(a=>{if(a.duration){let t=parseInt(a.duration)||0;"hours"===a.durationUnit?t*=60:"seconds"===a.durationUnit&&(t/=60),s.totalDuration+=t,t>e&&(e=t,n=a)}a.intensity&&(t[a.intensity]=(t[a.intensity]||0)+1)}),s.averageDuration=s.totalDuration/s.totalSessions,s.bestSession=n,Object.keys(t).length>0&&(s.mostCommonIntensity=Object.entries(t).sort(([,t],[,e])=>e-t)[0][0])}const i=new Date;i.setDate(i.getDate()-30);const d=a.filter(t=>new Date(t.timestamp)>i);s.recentFrequency=d.length;const r=new Date(a[0].timestamp),l=new Date,c=Math.max(1,(l-r)/864e5)/7;return s.weeklyAverage=s.totalSessions/c,s}(t),s=c(n.categoryId);this._createModal(n,a,s),this._bindCloseHandlers(),this._showModal()},_getActivity:t=>e().activities?.find(e=>e.id===t),_createModal(t,e,n){const a=`\n      <div id="activity-stats-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">\n        <div class="modal-content bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full mx-4 max-h-[90vh] flex flex-col">\n          <div class="modal-header flex-shrink-0 flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700">\n            <div class="flex items-center gap-3">\n              <div class="activity-icon w-10 h-10 rounded-full flex items-center justify-center text-xl" style="background-color: ${n.color}20; color: ${n.color};">\n                ${t.icon||n.icon}\n              </div>\n              <div>\n                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">${t.name}</h3>\n                <p class="text-sm text-gray-500 dark:text-gray-400">Activity Statistics</p>\n              </div>\n            </div>\n            <button id="close-stats-modal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">\n              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path d="M6 18L18 6M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n              </svg>\n            </button>\n          </div>\n          \n          <div class="modal-body flex-1 overflow-y-auto p-4">\n            ${m(t,e,n)}\n          </div>\n        </div>\n      </div>\n    `,s=document.getElementById("activity-stats-modal");s&&s.remove(),document.body.insertAdjacentHTML("beforeend",a)},_bindCloseHandlers(){const t=document.getElementById("activity-stats-modal"),e=document.getElementById("close-stats-modal"),n=()=>{t&&(t.classList.add("hidden"),setTimeout(()=>t.remove(),300))};e&&e.addEventListener("click",n),t&&t.addEventListener("click",e=>{e.target===t&&n()})},_showModal(){const t=document.getElementById("activity-stats-modal");t&&t.classList.remove("hidden")}};export{v as A,p as S,y as a};
