const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DJCdj0tE.js","assets/index-D3xn2g9s.css"])))=>i.map(i=>d[i]);
import{_ as d,m as h}from"./index-DJCdj0tE.js";let i=null,n=[],c=!1;async function u(){if(i)return i;try{return i=(await d(async()=>{const{default:t}=await import("https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/+esm");return{default:t}},[])).default,i}catch(t){return console.error("[reorder] failed to load SortableJS",t),null}}async function b(){const t=await u();if(!t)return;l(),n=[];const o=document.querySelector("#habits-view #habits-list-container");if(o){const r=new t(o,{animation:150,handle:".category-drag-handle",draggable:".category-section",ghostClass:"sortable-ghost"});n.push(r)}document.querySelectorAll("#habits-view .category-habits").forEach(r=>{const e=new t(r,{animation:150,handle:".habit-drag-handle",draggable:".habit-row",ghostClass:"sortable-ghost"});n.push(e)})}function l(){n.forEach(t=>t.destroy()),n=[]}function f(){c=!c;const t=document.querySelectorAll(".reorder-btn");if(y(c),c){b(),document.body.classList.add("reorder-mode"),t.forEach(e=>e.classList.add("bg-purple-200")),document.querySelectorAll(".drag-handle").forEach(e=>e.classList.remove("hidden")),document.querySelectorAll(".edit-category-btn, .habit-actions, .edit-habit-btn").forEach(e=>e.classList.add("hidden")),document.querySelectorAll(".new-category-btn, .new-habit-btn").forEach(e=>{e.disabled=!0,e.classList.add("pointer-events-none","opacity-60","brightness-95")});const r=document.querySelector(".search-container input");r&&(r.disabled=!0,r.classList.add("pointer-events-none","opacity-60","brightness-95")),document.querySelectorAll(".tab-item").forEach(e=>{e.classList.add("pointer-events-none","opacity-50")}),document.querySelectorAll(".category-section").forEach(e=>{const a=e.querySelector(".category-habits"),s=e.querySelector(".expand-btn svg");a&&a.classList.add("hidden"),s&&s.classList.add("rotate-180")})}else{l(),document.body.classList.remove("reorder-mode"),t.forEach(e=>e.classList.remove("bg-purple-200")),document.querySelectorAll(".drag-handle").forEach(e=>e.classList.add("hidden")),document.querySelectorAll(".edit-category-btn, .habit-actions, .edit-habit-btn").forEach(e=>e.classList.remove("hidden")),document.querySelectorAll(".new-category-btn, .new-habit-btn").forEach(e=>{e.disabled=!1,e.classList.remove("pointer-events-none","opacity-60","brightness-95")});const r=document.querySelector(".search-container input");r&&(r.disabled=!1,r.classList.remove("pointer-events-none","opacity-60","brightness-95")),document.querySelectorAll(".tab-item").forEach(e=>{e.classList.remove("pointer-events-none","opacity-50")}),m()}}function y(t){const o=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>`,r=t?"Done":"Reorder";document.querySelectorAll(".reorder-btn").forEach(e=>{e.innerHTML=`${o}<span class="ml-1.5">${r}</span>`,e.classList.add("font-semibold"),e.style.minWidth||(e.style.minWidth="90px")})}function p(){document.addEventListener("click",t=>{t.target.closest(".reorder-btn")&&(t.preventDefault(),f())}),document.querySelectorAll(".reorder-btn").forEach(t=>{t.classList.add("font-semibold"),t.style.minWidth||(t.style.minWidth="90px")})}function m(){const t=[],o=[];document.querySelectorAll("#habits-view .category-section").forEach(r=>{const e=r.dataset.categoryId;e&&t.push(e),r.querySelectorAll(".habit-item").forEach(a=>{const s=a.dataset.habitId;s&&o.push(s)})}),!(!t.length&&!o.length)&&(h(r=>{r.categories.sort((e,a)=>t.indexOf(e.id)-t.indexOf(a.id)),r.habits.sort((e,a)=>o.indexOf(e.id)-o.indexOf(a.id))}),d(()=>import("./index-DJCdj0tE.js").then(r=>r.l),__vite__mapDeps([0,1])).then(r=>r.renderHabitsView()))}export{l as destroySortables,u as ensureSortableLoaded,b as initSortables,p as initializeReorder,y as setReorderBtnLabel,f as toggleReorderMode};
