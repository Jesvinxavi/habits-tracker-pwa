const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-BdDUzKB8.js","assets/chunk-DKk19pOv.js","assets/chunk-Crpe9ixu.js","assets/chunk-D7AUNH-1.js","assets/chunk-T8n2V78z.js"])))=>i.map(i=>d[i]);
import{g as e,d as t,A as o,_ as n}from"./chunk-BdDUzKB8.js";import{o as c,c as a,s as r}from"./chunk-DKk19pOv.js";import{C as i,a as d}from"./chunk-D7AUNH-1.js";import"./chunk-Crpe9ixu.js";import"./chunk-T8n2V78z.js";let l=!1;function s(){if(l)return;const e=document.querySelector(".color-grid"),t=document.querySelector(".edit-color-grid");(e||t)&&(i.forEach(({hex:o,gradient:n,shadow:c})=>{const a=document.createElement("button");a.className=`color-option w-10 h-10 rounded-xl bg-gradient-to-br ${n} shadow-lg hover:scale-110 transition-all duration-200 ${c}`,a.dataset.color=o,e&&e.appendChild(a);const r=document.createElement("button");r.className=`edit-color-option w-10 h-10 rounded-xl bg-gradient-to-br ${n} shadow-lg hover:scale-110 transition-all duration-200 ${c}`,r.dataset.color=o,t&&t.appendChild(r)}),l=!0)}function g(){const t=document.getElementById("habit-category-select");if(!t)return;t.innerHTML='<option value="" disabled selected>Select Category</option>',e().categories.forEach(e=>{const o=document.createElement("option");o.value=e.id,o.textContent=e.name,t.appendChild(o)});const o=e().categories.length>0;t.classList.toggle("hidden",!o);const n=t.nextElementSibling;n&&"svg"===n.tagName.toLowerCase()&&n.classList.toggle("hidden",!o)}function m(){s(),function(){const e=document.getElementById("category-name-input"),t=document.querySelectorAll(".color-option");e&&(e.value=""),t.forEach(e=>e.classList.remove("ring-2","ring-black","ring-offset-2"))}(),c("add-category-modal")}function u(){a("add-category-modal")}function y(){a("edit-category-modal")}function E(){const e=document.getElementById("category-name-input"),c=document.querySelector(".color-option.ring-2");if(!e||!c)return;const a={id:d(),name:e.value.trim(),color:c.dataset.color};t(o.addCategory(a)),window._preselectCategoryId=a.id,u(),g(),n(()=>import("./chunk-BdDUzKB8.js").then(e=>e.H),__vite__mapDeps([0,1,2,3,4])).then(e=>e.renderHabitsList())}function p(){const e=document.getElementById("edit-category-modal"),c=e?.dataset.categoryId;if(!c)return;const a=document.getElementById("edit-category-name-input"),r=document.querySelector(".edit-color-option.ring-2");a&&r&&(t(o.updateCategory(c,{name:a.value.trim(),color:r.dataset.color})),y(),g(),n(()=>import("./chunk-BdDUzKB8.js").then(e=>e.H),__vite__mapDeps([0,1,2,3,4])).then(e=>e.renderHabitsList()))}function h(){const e=document.getElementById("edit-category-modal"),c=e?.dataset.categoryId;c&&r({title:"Delete Category?",message:"Deleting this category will also remove all habits it contains. This action cannot be undone.",okText:"Delete",onOK:()=>{t(o.deleteCategory(c)),y(),g(),n(()=>import("./chunk-BdDUzKB8.js").then(e=>e.H),__vite__mapDeps([0,1,2,3,4])).then(e=>e.renderHabitsList())}})}function f(){s();const t=document.querySelector(".new-category-btn");t&&t.addEventListener("click",m);const o=document.getElementById("category-name-input");o&&o.addEventListener("input",L);const n=document.getElementById("cancel-category"),a=document.getElementById("save-category");n&&n.addEventListener("click",u),a&&a.addEventListener("click",E);const r=document.getElementById("edit-category-name-input");r&&r.addEventListener("input",v);const i=document.getElementById("cancel-edit-category"),d=document.getElementById("save-edit-category"),l=document.getElementById("delete-category-btn");i&&i.addEventListener("click",y),d&&d.addEventListener("click",p),l&&l.addEventListener("click",h),document.addEventListener("click",e=>{e.target.classList.contains("color-option")?(document.querySelectorAll(".color-option").forEach(e=>e.classList.remove("ring-2","ring-black","ring-offset-2")),e.target.classList.add("ring-2","ring-black","ring-offset-2"),L()):e.target.classList.contains("edit-color-option")&&(document.querySelectorAll(".edit-color-option").forEach(e=>e.classList.remove("ring-2","ring-black","ring-offset-2")),e.target.classList.add("ring-2","ring-black","ring-offset-2"),v())}),document.addEventListener("click",t=>{const o=t.target.closest(".edit-category-btn");if(o){const t=o.dataset.categoryId;t&&function(t){s();const o=e().categories.find(e=>e.id===t);if(!o)return;const n=document.getElementById("edit-category-name-input");n&&(n.value=o.name),document.getElementById("edit-category-modal").dataset.categoryId=t,document.querySelectorAll(".edit-color-option").forEach(e=>{e.classList.toggle("ring-2",e.dataset.color===o.color)}),c("edit-category-modal")}(t)}}),g()}function L(){const e=document.getElementById("save-category"),t=document.getElementById("category-name-input"),o=t&&t.value.trim().length>0,n=!!document.querySelector(".color-option.ring-2"),c=o&&n;e&&(e.disabled=!c,e.classList.toggle("opacity-50",!c))}function v(){const e=document.getElementById("save-edit-category"),t=document.getElementById("edit-category-name-input"),o=t&&t.value.trim().length>0,n=!!document.querySelector(".edit-color-option.ring-2"),c=o&&n;e&&(e.disabled=!c,e.classList.toggle("opacity-50",!c))}export{u as closeAddCategoryModal,f as initializeCategories,m as openAddCategoryModal,g as populateCategoryDropdown};
