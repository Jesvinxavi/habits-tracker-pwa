const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CWk_d2Bu.js","assets/vendor-DbHZnqlu.js","assets/index-COOhAAvL.css"])))=>i.map(i=>d[i]);
import{_ as g}from"./vendor-DbHZnqlu.js";import{g as s,z as L,B as C,C as b,D as _,l as u,A as m,E as A}from"./index-CWk_d2Bu.js";let v=!1;function y(){if(v)return;const e=document.querySelector(".color-grid"),t=document.querySelector(".edit-color-grid");!e&&!t||(b.forEach(({hex:o,gradient:n,shadow:a})=>{const c=document.createElement("button");c.className=`color-option w-10 h-10 rounded-xl bg-gradient-to-br ${n} shadow-lg hover:scale-110 transition-all duration-200 ${a}`,c.dataset.color=o,e&&e.appendChild(c);const i=document.createElement("button");i.className=`edit-color-option w-10 h-10 rounded-xl bg-gradient-to-br ${n} shadow-lg hover:scale-110 transition-all duration-200 ${a}`,i.dataset.color=o,t&&t.appendChild(i)}),v=!0)}function S(){const e=document.getElementById("category-name-input"),t=document.querySelectorAll(".color-option");e&&(e.value=""),t.forEach(o=>o.classList.remove("ring-2","ring-black","ring-offset-2"))}function l(){const e=document.getElementById("habit-category-select");if(!e)return;e.innerHTML='<option value="" disabled selected>Select Category</option>',s().categories.forEach(n=>{const a=document.createElement("option");a.value=n.id,a.textContent=n.name,e.appendChild(a)});const t=s().categories.length>0;e.classList.toggle("hidden",!t);const o=e.nextElementSibling;o&&o.tagName.toLowerCase()==="svg"&&o.classList.toggle("hidden",!t)}function k(){y(),S(),L("add-category-modal")}function B(){C("add-category-modal")}function w(e){y();const t=s().categories.find(n=>n.id===e);if(!t)return;const o=document.getElementById("edit-category-name-input");o&&(o.value=t.name),document.getElementById("edit-category-modal").dataset.categoryId=e,document.querySelectorAll(".edit-color-option").forEach(n=>{n.classList.toggle("ring-2",n.dataset.color===t.color)}),L("edit-category-modal")}function f(){C("edit-category-modal")}function q(){const e=document.getElementById("category-name-input"),t=document.querySelector(".color-option.ring-2");if(!e||!t)return;const o={id:_(),name:e.value.trim(),color:t.dataset.color};u(m.addCategory(o)),window._preselectCategoryId=o.id,B(),l(),g(()=>import("./index-CWk_d2Bu.js").then(n=>n.R),__vite__mapDeps([0,1,2])).then(n=>n.renderHabitsList())}function T(){const e=document.getElementById("edit-category-modal"),t=e==null?void 0:e.dataset.categoryId;if(!t)return;const o=document.getElementById("edit-category-name-input"),n=document.querySelector(".edit-color-option.ring-2");!o||!n||(u(m.updateCategory(t,{name:o.value.trim(),color:n.dataset.color})),f(),l(),g(()=>import("./index-CWk_d2Bu.js").then(a=>a.R),__vite__mapDeps([0,1,2])).then(a=>a.renderHabitsList()))}function D(){const e=document.getElementById("edit-category-modal"),t=e==null?void 0:e.dataset.categoryId;t&&A({title:"Delete Category?",message:"Deleting this category will also remove all habits it contains. This action cannot be undone.",okText:"Delete",onOK:()=>{u(m.deleteCategory(t)),f(),l(),g(()=>import("./index-CWk_d2Bu.js").then(o=>o.R),__vite__mapDeps([0,1,2])).then(o=>o.renderHabitsList())}})}function O(){y();const e=document.querySelector(".new-category-btn");e&&e.addEventListener("click",k);const t=document.getElementById("category-name-input");t&&t.addEventListener("input",I);const o=document.getElementById("cancel-category"),n=document.getElementById("save-category");o&&o.addEventListener("click",B),n&&n.addEventListener("click",q);const a=document.getElementById("edit-category-name-input");a&&a.addEventListener("input",h);const c=document.getElementById("cancel-edit-category"),i=document.getElementById("save-edit-category"),p=document.getElementById("delete-category-btn");c&&c.addEventListener("click",f),i&&i.addEventListener("click",T),p&&p.addEventListener("click",D),document.addEventListener("click",d=>{d.target.classList.contains("color-option")?(document.querySelectorAll(".color-option").forEach(r=>r.classList.remove("ring-2","ring-black","ring-offset-2")),d.target.classList.add("ring-2","ring-black","ring-offset-2"),I()):d.target.classList.contains("edit-color-option")&&(document.querySelectorAll(".edit-color-option").forEach(r=>r.classList.remove("ring-2","ring-black","ring-offset-2")),d.target.classList.add("ring-2","ring-black","ring-offset-2"),h())}),document.addEventListener("click",d=>{const r=d.target.closest(".edit-category-btn");if(r){const E=r.dataset.categoryId;E&&w(E)}}),l()}function I(){const e=document.getElementById("save-category"),t=document.getElementById("category-name-input"),o=t&&t.value.trim().length>0,n=!!document.querySelector(".color-option.ring-2"),a=o&&n;e&&(e.disabled=!a,e.classList.toggle("opacity-50",!a))}function h(){const e=document.getElementById("save-edit-category"),t=document.getElementById("edit-category-name-input"),o=t&&t.value.trim().length>0,n=!!document.querySelector(".edit-color-option.ring-2"),a=o&&n;e&&(e.disabled=!a,e.classList.toggle("opacity-50",!a))}export{B as closeAddCategoryModal,O as initializeCategories,k as openAddCategoryModal,l as populateCategoryDropdown};
