import{g as e}from"./chunk-BdDUzKB8.js";import{u as t,v as d,x as r,y as i,z as l}from"./chunk-D7AUNH-1.js";import{o as a,c as o,s as n}from"./chunk-DKk19pOv.js";import"./chunk-Crpe9ixu.js";import"./chunk-T8n2V78z.js";let s=!1,c=!1,u=null;function y(){s||function(){const e=document.getElementById("holiday-modal");if(!e)return;e.querySelector("#cancel-holiday")?.addEventListener("click",()=>o("holiday-modal")),e.querySelector("#done-holiday")?.addEventListener("click",()=>o("holiday-modal")),function(){if(c)return;c=!0;const e="holiday-period-modal",t=document.getElementById(e);if(!t)return;const d=t.querySelector("#period-label-input"),r=t.querySelector("#period-start-input"),n=t.querySelector("#period-end-input"),s=t.querySelector("#save-period"),y=t.querySelector("#cancel-period"),p=t.querySelector("#period-form-title");function b(){const e=""!==d.value.trim()&&r.value&&n.value&&n.value>=r.value;s.disabled=!e,s.classList.toggle("opacity-50",!e)}[d,r,n].forEach(e=>e.addEventListener("input",b)),y.addEventListener("click",()=>o(e)),s.addEventListener("click",()=>{s.disabled||(u?l({id:u,label:d.value.trim(),startISO:r.value,endISO:n.value}):i({label:d.value.trim(),startISO:r.value,endISO:n.value}),o(e),v())}),m=function({mode:t,period:i}){u="edit"===t?i.id:null,p.textContent="edit"===t?"Edit Holiday Period":"New Holiday Period",d.value=i?.label||"";const l=(new Date).toISOString().slice(0,10);r.value=i?.startISO||l,n.value=i?.endISO||l,b(),a(e)}}(),e.querySelector("#add-period-btn")?.addEventListener("click",()=>{m({mode:"add"})}),e.querySelector("#delete-all-periods")?.addEventListener("click",()=>{n({title:"Delete All Holiday Periods",message:"This will remove every holiday period you have added. Continue?",okText:"Delete All",cancelText:"Cancel",onOK:()=>{t(),v()}})}),s=!0}(),v(),a("holiday-modal")}let m=()=>{};function v(){const t=document.getElementById("period-list");t&&(t.innerHTML="",0!==e().holidayPeriods.length?e().holidayPeriods.forEach(e=>{const i=document.createElement("div");i.className="flex justify-between items-center p-3 bg-white/80 dark:bg-gray-700/80 border border-gray-200 dark:border-gray-600 rounded-lg";const l=Math.round((new Date(e.endISO)-new Date(e.startISO))/864e5)+1,a=d(e.startISO),o=d(e.endISO);i.innerHTML=`\n      <div>\n        <div class="font-semibold text-gray-900 dark:text-white">${e.label}</div>\n        <div class="text-gray-500 dark:text-gray-400 text-sm">${a} &rarr; ${o}</div>\n        <div class="text-gray-400 dark:text-gray-500 text-xs">${l} ${1===l?"day":"days"}</div>\n      </div>\n      <div class="flex items-center gap-2">\n        <button class="edit-period w-8 h-8 flex items-center justify-center rounded-full border border-ios-blue text-ios-blue hover:bg-ios-blue/10" aria-label="Edit"><span class="material-icons text-ios-blue">edit</span></button>\n        <button class="delete-period w-8 h-8 flex items-center justify-center rounded-full border border-red-500 text-red-600 hover:bg-red-600/10" aria-label="Delete"><span class="material-icons text-red-600">delete</span></button>\n      </div>`,i.querySelector(".edit-period").addEventListener("click",()=>{m({mode:"edit",period:e})}),i.querySelector(".delete-period").addEventListener("click",()=>{n({title:"Delete Holiday Period",message:"Are you sure you want to delete this period? This cannot be undone.",okText:"Delete",cancelText:"Cancel",onOK:()=>{r(e.id),v()}})}),t.appendChild(i)}):t.insertAdjacentHTML("beforeend",'<p class="text-center text-gray-500 dark:text-gray-400 text-sm">No holiday periods yet.</p>'))}export{y as openHolidayModal};
