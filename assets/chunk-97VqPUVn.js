import{e,i as t,s as n}from"./chunk-1sPJXvOa.js";import{s as o,g as r}from"./chunk-D8P7fKnl.js";function a(e){const t=document.querySelectorAll(`#${e}`),n=t[t.length-1];if(!n)return;document.body.style.overflow="hidden",n.classList.remove("hidden"),n.classList.remove("animate-in","fade-in"),n.style.display="flex";const o=n.querySelector(".overflow-y-auto");o&&(o.scrollTop=0),n.parentNode!==document.body&&document.body.appendChild(n)}function l(e){const t=document.getElementById(e);if(!t)return;t.classList.add("hidden"),t.style.display="none",document.body.style.overflow="";const n=new CustomEvent("modalClosed",{detail:{modalId:e}});document.dispatchEvent(n)}function s({title:e="Are you sure?",message:t="",okText:n="OK",cancelText:o="Cancel",onOK:r}={}){let s=document.getElementById("global-confirm-modal");s||(s=document.createElement("div"),s.id="global-confirm-modal",s.className="modal-overlay fixed inset-0 bg-black/70 backdrop-blur-sm z-[1100] hidden items-center justify-center p-4",document.body.appendChild(s));const i=!o;s.innerHTML=`<div class="modal-content bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-sm w-full p-6 text-center">\n      <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">${e}</h2>\n      <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">${t}</p>\n      <div class="flex ${i?"justify-center":"gap-3"}">\n        ${i?"":`<button class='confirm-cancel-btn flex-1 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors'>${o}</button>`}\n        <button class='confirm-ok-btn ${i?"w-full":"flex-1"} py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors'>${n}</button>\n      </div>\n    </div>`,s.querySelector(".confirm-ok-btn").onclick=()=>{l("global-confirm-modal"),"function"==typeof r&&r()};const d=s.querySelector(".confirm-cancel-btn");d&&(d.onclick=()=>l("global-confirm-modal")),a("global-confirm-modal")}const i=Object.freeze(Object.defineProperty({__proto__:null,showConfirm:s},Symbol.toStringTag,{value:"Module"}));let d=null;function c(){"beforeinstallprompt"in window&&(window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),d=e,function(){if(document.getElementById("install-banner"))return;const e=document.createElement("div");e.id="install-banner",e.className="fixed inset-x-4 bottom-4 md:inset-x-auto md:right-4 md:bottom-4 z-50 flex items-center justify-between gap-4 px-4 py-3 rounded-xl shadow-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700";const t=document.createElement("span");t.className="text-sm font-medium text-gray-900 dark:text-gray-100",t.textContent="Add Healthy Habits Tracker to your Home Screen?";const n=document.createElement("div");n.className="flex items-center gap-2";const o=document.createElement("button");o.id="install-btn",o.className="px-3 py-1.5 rounded-lg text-sm font-semibold text-white bg-ios-blue hover:bg-ios-blue/90 focus:outline-none focus:ring-2 focus:ring-ios-blue/50",o.textContent="Install";const r=document.createElement("button");r.id="dismiss-install-btn",r.className="px-3 py-1.5 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400/50",r.textContent="Not now",n.appendChild(o),n.appendChild(r),e.appendChild(t),e.appendChild(n),document.body.appendChild(e),o.addEventListener("click",async()=>{if(d){e.remove(),d.prompt();try{await d.userChoice}finally{d=null}}}),r.addEventListener("click",()=>{e.remove(),d=null})}()}),window.addEventListener("appinstalled",()=>{!function(){const e=document.getElementById("install-banner");e&&e.remove()}(),d=null}))}function u(e={}){const{title:t="",showBack:n=!1,extraButtons:o=[],callbacks:r={}}=e,a=document.createElement("div");a.className="app-header flex justify-between items-center h-11 px-4 sm:px-6 lg:px-8 border-b border-gray-200 dark:border-gray-700 border-opacity-50 w-full pt-1.5";let l="";if(n&&(l+='\n      <button class="back-btn bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 px-3 py-1.5 rounded-lg font-medium flex items-center gap-1.5">\n        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n          <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n        </svg>\n        Back\n      </button>\n    '),l+=t?`<h1 class="app-title text-black dark:text-white text-[36px] font-extrabold leading-none flex items-end">${t}</h1>`:'\n      <div></div>\n      <h1 class="app-title text-center flex-grow text-[36px] font-extrabold leading-none flex items-end">Fitness</h1>\n      <div></div>\n    ',o.length>0){l+=o.map(e=>`\n      <button class="${e.className||"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-300 px-3 py-1.5 rounded-lg font-medium flex items-center gap-1.5"}" data-button-id="${e.id||""}">\n        ${e.icon||""}\n        ${e.text||""}\n      </button>\n    `).join("")}if(a.innerHTML=l,n&&r.onBack){const e=a.querySelector(".back-btn");e&&e.addEventListener("click",r.onBack)}return o.forEach(e=>{if(e.id&&r[`on${e.id.charAt(0).toUpperCase()+e.id.slice(1)}`]){const t=a.querySelector(`[data-button-id="${e.id}"]`);t&&t.addEventListener("click",r[`on${e.id.charAt(0).toUpperCase()+e.id.slice(1)}`])}}),a}function b(e={}){const{type:a="habits",callbacks:l={}}=e,s=document.createElement("div");if(s.className="action-buttons flex gap-3 mb-1 px-4 pt-1","habits"===a){s.innerHTML='\n      <button class="new-category-btn flex-1 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 py-2 px-4 rounded-xl font-medium flex items-center justify-center gap-2">\n        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n          <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-5l-2-2H5a2 2 0 00-2 2z" stroke="currentColor" stroke-width="2"/>\n        </svg>\n        New Category\n      </button>\n      <button class="new-habit-btn flex-1 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 py-2 px-4 rounded-xl font-medium flex items-center justify-center gap-2">\n        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n          <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n        </svg>\n        New Habit\n      </button>\n    ',s.querySelectorAll(".new-category-btn, .new-habit-btn").forEach(e=>{e.classList.add("font-semibold")});const e=s.querySelector(".new-category-btn"),t=s.querySelector(".new-habit-btn");e&&l.onNewCategory&&e.addEventListener("click",l.onNewCategory),t&&l.onNewHabit&&t.addEventListener("click",l.onNewHabit);const n=()=>{if(!t)return;const e=r().categories.length>0;t.disabled=!e,e?(t.classList.remove("opacity-50","cursor-not-allowed"),t.title=""):(t.classList.add("opacity-50","cursor-not-allowed"),t.title="Create a category first before adding habits")};n(),o(()=>{n()})}else if("fitness"===a){s.innerHTML='\n      <button id="new-activity-btn" class="flex-1 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 py-1.5 px-4 rounded-xl font-medium flex items-center justify-center gap-2">\n        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n          <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n        </svg>\n        New Activity\n      </button>\n      <button id="start-timer-btn" class="flex-1 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 py-1.5 px-4 rounded-xl font-medium flex items-center justify-center gap-2">\n        <span class="material-icons text-xl">schedule</span>\n        Timer\n      </button>\n    ',s.querySelectorAll("#new-activity-btn, #start-timer-btn").forEach(e=>{e.classList.add("font-semibold")});const e=s.querySelector("#new-activity-btn"),o=s.querySelector("#start-timer-btn");e&&l.onNewActivity&&e.addEventListener("click",l.onNewActivity),o&&l.onTimer&&o.addEventListener("click",l.onTimer),t(),n(()=>{m(o)}),m(o)}return s}function m(t){if(!t)return;e().isRunning?(t.classList.remove("bg-blue-100","dark:bg-blue-900","text-blue-600","dark:text-blue-300"),t.classList.add("bg-orange-100","dark:bg-orange-900","text-orange-600","dark:text-orange-300")):(t.classList.remove("bg-orange-100","dark:bg-orange-900","text-orange-600","dark:text-orange-300"),t.classList.add("bg-blue-100","dark:bg-blue-900","text-blue-600","dark:text-blue-300"))}export{i as C,b as a,l as c,c as i,u as m,a as o,s};
