const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CWk_d2Bu.js","assets/vendor-DbHZnqlu.js","assets/index-COOhAAvL.css"])))=>i.map(i=>d[i]);
import{_ as h}from"./vendor-DbHZnqlu.js";import{l,A as d}from"./index-CWk_d2Bu.js";let i=null,s=[],c=!1;async function b(){if(i)return i;try{return i=(await h(async()=>{const{default:t}=await import("https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/+esm");return{default:t}},[])).default,i}catch(t){return console.error("[reorder] failed to load SortableJS",t),null}}async function f(){const t=await b();if(!t)return;u(),s=[];const o=document.querySelector("#habits-view #habits-list-container");if(o){const r=new t(o,{animation:150,handle:".category-drag-handle",draggable:".category-section",ghostClass:"sortable-ghost"});s.push(r)}document.querySelectorAll("#habits-view .category-habits").forEach(r=>{const e=new t(r,{animation:150,handle:".habit-drag-handle",draggable:".habit-row",ghostClass:"sortable-ghost"});s.push(e)})}function u(){s.forEach(t=>t.destroy()),s=[]}function S(){c=!c;const t=document.querySelectorAll(".reorder-btn");if(y(c),c){f(),document.body.classList.add("reorder-mode"),t.forEach(e=>e.classList.add("bg-purple-200")),document.querySelectorAll(".drag-handle").forEach(e=>e.classList.remove("hidden")),document.querySelectorAll(".edit-category-btn, .habit-actions, .edit-habit-btn").forEach(e=>e.classList.add("hidden")),document.querySelectorAll(".new-category-btn, .new-habit-btn").forEach(e=>{e.disabled=!0,e.classList.add("pointer-events-none","opacity-60","brightness-95")});const r=document.querySelector(".search-container input");r&&(r.disabled=!0,r.classList.add("pointer-events-none","opacity-60","brightness-95")),document.querySelectorAll(".tab-item").forEach(e=>{e.classList.add("pointer-events-none","opacity-50")}),document.querySelectorAll(".category-section").forEach(e=>{const n=e.querySelector(".category-habits"),a=e.querySelector(".expand-btn svg");n&&n.classList.add("hidden"),a&&a.classList.add("rotate-180")})}else{u(),document.body.classList.remove("reorder-mode"),t.forEach(e=>e.classList.remove("bg-purple-200")),document.querySelectorAll(".drag-handle").forEach(e=>e.classList.add("hidden")),document.querySelectorAll(".edit-category-btn, .habit-actions, .edit-habit-btn").forEach(e=>e.classList.remove("hidden")),document.querySelectorAll(".new-category-btn, .new-habit-btn").forEach(e=>{e.disabled=!1,e.classList.remove("pointer-events-none","opacity-60","brightness-95")});const r=document.querySelector(".search-container input");r&&(r.disabled=!1,r.classList.remove("pointer-events-none","opacity-60","brightness-95")),document.querySelectorAll(".tab-item").forEach(e=>{e.classList.remove("pointer-events-none","opacity-50")}),m()}}function y(t){const o=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>`,r=t?"Done":"Reorder";document.querySelectorAll(".reorder-btn").forEach(e=>{e.innerHTML=`${o}<span class="ml-1.5">${r}</span>`,e.classList.add("font-semibold"),e.style.minWidth||(e.style.minWidth="90px")})}function v(){document.querySelectorAll(".reorder-btn").forEach(t=>{t.classList.add("font-semibold"),t.style.minWidth||(t.style.minWidth="90px")})}function m(){const t=[],o=[];document.querySelectorAll("#habits-view .category-section").forEach(r=>{const e=r.dataset.categoryId;e&&t.push(e),r.querySelectorAll(".habit-item").forEach(n=>{const a=n.dataset.habitId;a&&o.push(a)})}),!(!t.length&&!o.length)&&(l(d.reorderCategories(t)),l(d.reorderHabits(o)),h(()=>import("./index-CWk_d2Bu.js").then(r=>r.R),__vite__mapDeps([0,1,2])).then(r=>r.renderHabitsList()))}export{u as destroySortables,b as ensureSortableLoaded,f as initSortables,v as initializeReorder,y as setReorderBtnLabel,S as toggleReorderMode};
