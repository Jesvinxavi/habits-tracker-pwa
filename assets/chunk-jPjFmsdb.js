const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-97VqPUVn.js","assets/chunk-1sPJXvOa.js","assets/chunk-D8P7fKnl.js","assets/chunk-CM0JCX04.js","assets/chunk-Dwp9fxXX.js","assets/categories-BW9gbI_x.js"])))=>i.map(i=>d[i]);
import{_ as e,g as t,d as n,A as o,r as a}from"./chunk-D8P7fKnl.js";import{o as d,c,s as l}from"./chunk-97VqPUVn.js";import{M as s,F as r,e as i,O as u,h as m,T as y,a as g}from"./chunk-CM0JCX04.js";function h(){const e=document.getElementById("time-picker-btn"),t=document.getElementById("time-picker-popup"),n=document.getElementById("selected-time"),o=document.getElementById("hour-select"),a=document.getElementById("minute-select"),d=document.getElementById("hour-picker"),c=document.getElementById("minute-picker");if(!(e&&t&&d&&c))return;let l,s,r=o?o.value:"09",i=a?a.value:"00";function u(e,t){const n=e.getBoundingClientRect(),o=n.top+n.height/2;let a=null,d=1/0;if(e.querySelectorAll(`.${t}`).forEach(e=>{const t=e.getBoundingClientRect(),n=t.top+t.height/2,c=Math.abs(o-n);c<d&&(d=c,a=e)}),!a)return null;const c=t.replace("-option","");return a.dataset[c]??null}function m(e,t){const n=e.getBoundingClientRect(),o=n.top+n.height/2;let a=null,d=1/0;e.querySelectorAll(`.${t}`).forEach(e=>{const t=e.getBoundingClientRect(),n=t.top+t.height/2,c=Math.abs(o-n);c<d&&(d=c,a=e)}),a&&d>2&&a.scrollIntoView({behavior:"smooth",block:"center"})}function y(e,t){const n=e.scrollTop,o=28*t;n<.1*o?e.scrollTop=n+o:n>1.9*o&&(e.scrollTop=n-o)}function g(){const e=d.querySelectorAll(`[data-hour="${r}"]`);e.length>=2&&e[1].scrollIntoView({behavior:"instant",block:"center"});const t=c.querySelectorAll(`[data-minute="${i}"]`);t.length>=2&&t[1].scrollIntoView({behavior:"instant",block:"center"})}function h(){const e=u(d,"hour-option"),t=u(c,"minute-option");null!==e&&(r=e),null!==t&&(i=t),n&&(n.textContent=`${r}:${i}`)}e.addEventListener("click",e=>{e.stopPropagation(),o&&(r=o.value),a&&(i=a.value),function(){const e=document.getElementById("hour-options-container");if(e&&0===e.childElementCount)for(let n=0;n<3;n++)for(let t=0;t<24;t++){const n=t.toString().padStart(2,"0"),o=document.createElement("div");o.className="hour-option py-1 text-center text-sm transition-colors",o.setAttribute("data-hour",n),o.textContent=n,e.appendChild(o)}const t=document.getElementById("minute-options-container");if(t){t.innerHTML="";for(let e=0;e<3;e++)for(let n=0;n<60;n++){const e=n.toString().padStart(2,"0"),o=document.createElement("div");o.className="minute-option py-1 text-center text-sm transition-colors",o.setAttribute("data-minute",e),o.textContent=e,t.appendChild(o)}}}(),t.classList.remove("hidden"),setTimeout(g,10)}),document.addEventListener("click",d=>{t.contains(d.target)||e.contains(d.target)||t.classList.contains("hidden")||(o&&(o.value=r),a&&(a.value=i),n&&(n.textContent=`${r}:${i}`),t.classList.add("hidden"))}),t.addEventListener("click",e=>e.stopPropagation()),d.addEventListener("scroll",()=>{y(d,24),h(),clearTimeout(l),l=setTimeout(()=>{m(d,"hour-option")},150)}),c.addEventListener("scroll",()=>{y(c,60),h(),clearTimeout(s),s=setTimeout(()=>{m(c,"minute-option")},150)})}let E="ðŸ“‹";function f(){return E}function b(e){E=e}const p=["ðŸ’ª","ðŸƒ","ðŸš´","ðŸŠ","ðŸ§˜","âš–ï¸","ðŸŽ","ðŸ¥—","ðŸ’§","â˜•","ðŸ¥›","ðŸŠ","ðŸ“š","ðŸ“–","âœï¸","ðŸŽ“","ðŸ’¡","ðŸ§ ","ðŸ’¼","ðŸ’»","ðŸ“±","ðŸ“Š","ðŸ“","ðŸ“‹","ðŸ˜´","ðŸ›ï¸","ðŸŒ™","â°","ðŸ•","â±ï¸","ðŸŽµ","ðŸŽ¸","ðŸŽ¨","ðŸ“·","ðŸŽ®","ðŸŽ¯","ðŸŒ±","ðŸŒ³","ðŸŒ¸","ðŸŒž","ðŸŒ","â™»ï¸","ðŸ‘¥","ðŸ‘ª","â¤ï¸","ðŸ¤","ðŸ“ž","ðŸ’¬","ðŸ§¼","ðŸª¥","ðŸš¿","ðŸ’Š","ðŸ§´","ðŸŽ¯","âœˆï¸","ðŸš—","ðŸš¶","ðŸ—ºï¸","ðŸŽ’","ðŸ“","ðŸ’°","ðŸ’³","ðŸ’Ž","ðŸ“ˆ","ðŸ¦","ðŸ’¸","â­","ðŸŽ‰","ðŸ”¥","âš¡","âœ¨","ðŸš€"];let v=!1;function I(e){if(v)return;const t=e.querySelector("#icon-grid");if(!t)return void console.warn("Icon grid element not found in modal");t.innerHTML="";const n=document.createDocumentFragment();p.forEach(e=>{const t=document.createElement("button");t.className="icon-option w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-xl hover:bg-ios-blue hover:text-white transition-all duration-200 hover:scale-105",t.dataset.icon=e,t.textContent=e,n.appendChild(t)}),t.appendChild(n),v=!0}function B(){const e=document.getElementById("icon-selector-btn"),t=document.getElementById("icon-selection-modal"),n=document.getElementById("selected-icon-display");if(!e||!t||!n)return;function o(){n.textContent=E}I(t),e.addEventListener("click",()=>{I(t);const e=t.querySelector("#icon-grid");e&&e.children.length>0?d("icon-selection-modal"):console.error("Failed to build icon grid, cannot open modal")}),t.addEventListener("click",e=>{e.target===t&&c("icon-selection-modal")});const a=document.getElementById("select-icon"),l=document.getElementById("cancel-icon");t.addEventListener("click",e=>{const n=e.target.closest(".icon-option");n&&(b(n.dataset.icon||"ðŸ“‹"),t.querySelectorAll(".icon-option").forEach(e=>e.classList.remove("ring","ring-ios-blue","ring-2")),n.classList.add("ring","ring-ios-blue","ring-2"),a.disabled=!1)}),a?.addEventListener("click",()=>{o(),c("icon-selection-modal")}),l?.addEventListener("click",()=>c("icon-selection-modal")),o()}const L=new Set,k=new Set,x=new Set,C=new Set,w=new Set,q=new Set;let S="each";function A(e){S=e,T(),document.getElementById("monthly-each-btn")?.classList.toggle("font-semibold","each"===e),document.getElementById("monthly-on-btn")?.classList.toggle("font-semibold","on"===e),document.getElementById("monthly-dates-section")?.classList.toggle("hidden","each"!==e),document.getElementById("monthly-combinations-section")?.classList.toggle("hidden","on"!==e)}function _(e){document.querySelectorAll(".day-button").forEach(t=>{const n=parseInt(t.dataset.day,10);e.has(n)?t.classList.add("selected"):t.classList.remove("selected")})}function T(){const e=document.getElementById("frequency-select")?.value,t=document.getElementById("days-selection"),n=document.getElementById("monthly-details"),o=document.getElementById("yearly-details");var a;t&&t.classList.toggle("hidden",!("weekly"===e||"biweekly"===e)),n&&n.classList.toggle("hidden","monthly"!==e),o&&o.classList.toggle("hidden","yearly"!==e),"weekly"===e?_(L):"biweekly"===e&&_(k),"monthly"===e&&(a=x,document.querySelectorAll(".date-button").forEach(e=>{const t=parseInt(e.dataset.date,10);a.has(t)?e.classList.add("selected"):e.classList.remove("selected")}),z()),"yearly"===e&&(!function(e){document.querySelectorAll(".month-button").forEach(t=>{const n=parseInt(t.dataset.month,10);e.has(n)?t.classList.add("selected"):t.classList.remove("selected")})}(w),V(),W())}function M(e){const t=e.target.closest(".day-button");if(!t)return;const n=parseInt(t.dataset.day,10),o=document.getElementById("frequency-select")?.value;if(isNaN(n)||"weekly"!==o&&"biweekly"!==o)return;const a="weekly"===o?L:k;t.classList.toggle("selected")?a.add(n):a.delete(n)}function H(e){const t=document.getElementById("frequency-select")?.value;if("weekly"!==t&&"biweekly"!==t)return;const n="weekly"===t?L:k;n.clear(),document.querySelectorAll(".day-button").forEach(t=>{e?(t.classList.add("selected"),n.add(parseInt(t.dataset.day,10))):t.classList.remove("selected")})}function D(e){if(!e.target.classList.contains("date-button"))return;const t=parseInt(e.target.dataset.date,10);e.target.classList.toggle("selected"),e.target.classList.contains("selected")?x.add(t):x.delete(t),z()}function O(e){x.clear(),document.querySelectorAll(".date-button").forEach(t=>{e?(t.classList.add("selected"),x.add(parseInt(t.dataset.date,10))):t.classList.remove("selected")}),z()}function F(e){if(!e.target.classList.contains("month-button"))return;const t=parseInt(e.target.dataset.month,10);e.target.classList.toggle("selected"),e.target.classList.contains("selected")?w.add(t):w.delete(t),V()}function j(e){if(!e.target.classList.contains("yearly-date-button"))return;const t=parseInt(e.target.dataset.date,10);e.target.classList.toggle("selected"),e.target.classList.contains("selected")?q.add(t):q.delete(t),W()}function $(e){w.clear(),document.querySelectorAll(".month-button").forEach(t=>{e?(t.classList.add("selected"),w.add(parseInt(t.dataset.month,10))):t.classList.remove("selected")}),V()}function N(e){q.clear(),document.querySelectorAll(".yearly-date-button").forEach(t=>{e?(t.classList.add("selected"),q.add(parseInt(t.dataset.date,10))):t.classList.remove("selected")}),W()}function R(){const e=document.getElementById("ordinal-select")?.value,t=document.getElementById("day-of-week-select")?.value;if(!e||!t)return;const n=`${e}-${t}`;C.has(n)||(C.add(n),P())}function P(){const e=document.getElementById("combinations-list");if(!e)return;if(e.innerHTML="",0===C.size){const t=document.createElement("span");return t.textContent="No combinations added yet",t.className="text-gray-500 text-sm",void e.appendChild(t)}const t=document.createElement("div");t.className="space-y-2",C.forEach(e=>{const[n,o]=e.split("-"),a=document.createElement("div");a.className="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 w-full";const d=document.createElement("span");d.className="text-gray-900 dark:text-white text-sm font-semibold",d.textContent=`${i(n)} ${i(o)}`;const c=document.createElement("button");c.className="w-5 h-5 bg-red-500 rounded-full text-white text-xs flex items-center justify-center flex-shrink-0 ml-3",c.innerHTML="Ã—",c.onclick=()=>{C.delete(e),P()},a.appendChild(d),a.appendChild(c),t.appendChild(a)}),e.appendChild(t)}function V(){const e=document.getElementById("selected-months-count");e&&(e.textContent=w.size)}function z(){const e=document.getElementById("selected-dates-count");e&&(e.textContent=x.size)}function W(){const e=document.getElementById("selected-yearly-dates-count");e&&(e.textContent=q.size)}function U(){K(),J(),function(){const e=document.getElementById("yearly-date-grid");if(!e||e.childElementCount)return;const t=document.createDocumentFragment();for(let n=1;n<=31;n++){const e=document.createElement("button");e.className="yearly-date-button w-full aspect-square rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-medium text-sm hover:border-ios-blue hover:bg-ios-blue/10 transition-colors selected:border-[#007AFF] selected:bg-[#007AFF] selected:text-white",e.dataset.date=n,e.textContent=n,t.appendChild(e)}e.appendChild(t)}(),function(){const e=document.getElementById("weekly-day-grid");if(!e||e.childElementCount)return;const t=["S","M","T","W","T","F","S"],n=document.createDocumentFragment();t.forEach((e,t)=>{const o=document.createElement("button");o.className="day-button flex-1 h-12 rounded-lg border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-medium text-sm hover:border-ios-blue transition-colors",o.dataset.day=t,o.textContent=e,n.appendChild(o)}),e.appendChild(n)}(),function(){const e=document.getElementById("frequency-select");if(!e||e.dataset.enhanced)return;e.innerHTML="",r.forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=i(t),e.appendChild(n)}),e.dataset.enhanced="1"}(),G("month-interval-select",12),G("year-interval-select",5),function(){const e=document.getElementById("ordinal-select"),t=document.getElementById("day-of-week-select");e&&!e.dataset.enhanced&&(e.innerHTML="",u.forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=i(t),e.appendChild(n)}),e.dataset.enhanced="1");t&&!t.dataset.enhanced&&(t.innerHTML="",m.forEach(e=>{const n=document.createElement("option");n.value=e,n.textContent=i(e),t.appendChild(n)}),t.dataset.enhanced="1")}(),Q("month-interval-select","month-text","month","months"),Q("year-interval-select","year-text","year","years"),document.getElementById("frequency-select")?.addEventListener("change",T),document.addEventListener("click",M),document.getElementById("select-all-days")?.addEventListener("click",()=>H(!0)),document.getElementById("clear-all-days")?.addEventListener("click",()=>H(!1)),document.getElementById("monthly-each-btn")?.addEventListener("click",()=>A("each")),document.getElementById("monthly-on-btn")?.addEventListener("click",()=>A("on")),document.addEventListener("click",D),document.getElementById("select-all-dates")?.addEventListener("click",()=>O(!0)),document.getElementById("clear-dates")?.addEventListener("click",()=>O(!1)),document.getElementById("add-combination-btn")?.addEventListener("click",R),document.getElementById("clear-all-combinations")?.addEventListener("click",()=>{C.clear(),P()}),document.addEventListener("click",F),document.addEventListener("click",j),document.getElementById("select-all-months")?.addEventListener("click",()=>$(!0)),document.getElementById("clear-months")?.addEventListener("click",()=>$(!1)),document.getElementById("select-all-yearly-dates")?.addEventListener("click",()=>N(!0)),document.getElementById("clear-yearly-dates")?.addEventListener("click",()=>N(!1)),document.getElementById("yearly-specify-dates-toggle")?.addEventListener("change",Y),T(),Y(),P(),V(),z(),W(),document.getElementById("month-interval-select")?.addEventListener("change",()=>Q("month-interval-select","month-text","month","months")),document.getElementById("year-interval-select")?.addEventListener("change",()=>Q("year-interval-select","year-text","year","years"))}function K(){const e=document.getElementById("monthly-date-grid");if(!e||e.childElementCount)return;const t=document.createDocumentFragment();for(let n=1;n<=31;n++){const e=document.createElement("button");e.className="date-button w-full aspect-square rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-medium text-sm hover:border-ios-blue hover:bg-ios-blue/5 transition-all",e.dataset.date=n,e.textContent=n,t.appendChild(e)}e.appendChild(t)}function J(){const e=document.getElementById("yearly-month-grid");if(!e||e.childElementCount)return;const t=s,n=document.createDocumentFragment();t.forEach((e,t)=>{const o=document.createElement("button");o.className="month-button w-full py-3 rounded-lg border-2 border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white font-medium text-sm hover:border-ios-blue hover:bg-ios-blue/10 transition-colors selected:border-[#007AFF] selected:bg-[#007AFF] selected:text-white",o.dataset.month=t,o.textContent=e,n.appendChild(o)}),e.appendChild(n)}function Y(){const e=document.getElementById("yearly-specify-dates-toggle")?.checked??!1;document.getElementById("yearly-dates-section")?.classList.toggle("hidden",!e),e||(q.clear(),document.querySelectorAll(".yearly-date-button.selected").forEach(e=>e.classList.remove("selected")),W())}function G(e,t){const n=document.getElementById(e);if(n&&!n.dataset.enhanced){for(let e=1;e<=t;e++){const t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)}n.dataset.enhanced="1"}}function Q(e,t,n,o){const a=parseInt(document.getElementById(e)?.value||"1",10),d=document.getElementById(t);d&&(d.textContent=1===a?n:o)}function X(){const e=document.getElementById("target-example-text");if(!e)return;const t=document.getElementById("target-frequency-select")?.value||"daily",n=document.getElementById("target-value-input")?.value||"1",o=document.getElementById("target-unit-select")?.value||"none",a="none"===o?"":` ${o}`;e.textContent=`Example: ${n}${a} each ${t}`}function Z(){!function(){const e=document.getElementById("target-frequency-select");e&&!e.dataset.enhanced&&(e.innerHTML="",r.forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=i(t),e.appendChild(n)}),e.dataset.enhanced="1")}(),function(){const e=document.getElementById("target-unit-select");e&&!e.dataset.enhanced&&(y.forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=i(t),e.appendChild(n)}),e.dataset.enhanced="1")}(),["target-frequency-select","target-value-input","target-unit-select"].forEach(e=>{document.getElementById(e)?.addEventListener("input",X),document.getElementById(e)?.addEventListener("change",X)}),X()}let ee=null;function te(){if(0===t().categories.length)return void e(async()=>{const{showConfirm:e}=await import("./chunk-97VqPUVn.js").then(e=>e.C);return{showConfirm:e}},__vite__mapDeps([0,1,2,3,4])).then(({showConfirm:t})=>{t({title:"No Categories",message:"You need to create at least one category before adding habits. Would you like to create a category now?",okText:"Create Category",cancelText:"Cancel",onOK:()=>{e(()=>import("./categories-BW9gbI_x.js"),__vite__mapDeps([5,2,0,1,3,4])).then(e=>{e.initializeCategories(),e.openAddCategoryModal()})}})});ee=null,oe();const n=document.getElementById("delete-habit-btn");n&&n.classList.add("hidden"),d("add-habit-modal")}function ne(){c("add-habit-modal"),ee=null}function oe(){document.getElementById("habit-modal-title").textContent="New Habit",document.getElementById("habit-modal-desc").textContent="Add a new habit to track your progress",document.getElementById("habit-name-input").value="",document.getElementById("habit-category-select").value="",document.getElementById("frequency-select").value="daily",document.getElementById("anytime-toggle").checked=!0,document.getElementById("time-selection").classList.add("hidden"),document.getElementById("selected-time").textContent="09:00",document.getElementById("hour-select").value="09",document.getElementById("minute-select").value="00",L.clear(),k.clear(),x.clear(),C.clear(),w.clear(),q.clear(),document.querySelectorAll(".day-button, .date-button, .month-button, .yearly-date-button").forEach(e=>e.classList.remove("selected")),P(),A("each"),document.getElementById("month-interval-select").value="1",document.getElementById("year-interval-select").value="1",document.getElementById("completion-target-section").classList.add("hidden"),document.getElementById("target-frequency-select").value="daily",document.getElementById("target-value-input").value="1",document.getElementById("target-unit-select").value="none",document.getElementById("default-increment-input").value="1",document.getElementById("pause-habit-toggle").checked=!1,document.getElementById("holidays-toggle").checked=!1,b("ðŸ“‹");const t=document.getElementById("selected-icon-display");if(t&&(t.textContent=f()),document.getElementById("schedule-tab")?.click(),window._preselectCategoryId){const e=document.getElementById("habit-category-select");e&&(e.value=window._preselectCategoryId),window._preselectCategoryId=void 0}e(()=>import("./categories-BW9gbI_x.js"),__vite__mapDeps([5,2,0,1,3,4])).then(e=>e.populateCategoryDropdown())}function ae(){e(()=>import("./categories-BW9gbI_x.js"),__vite__mapDeps([5,2,0,1,3,4])).then(e=>e.populateCategoryDropdown()),h(),K(),J(),document.addEventListener("click",e=>{const t=e.target.closest(".new-habit-btn");if(t){if(e.preventDefault(),t.disabled)return;te()}}),document.getElementById("cancel-habit")?.addEventListener("click",ne),document.getElementById("save-habit")?.addEventListener("click",ce);const t=document.getElementById("habit-name-input"),n=document.getElementById("habit-category-select");function o(){const e=document.getElementById("anytime-toggle")?.checked??!0;document.getElementById("time-selection")?.classList.toggle("hidden",e)}t?.addEventListener("input",de),n?.addEventListener("change",de),U(),Z(),document.getElementById("anytime-toggle")?.addEventListener("change",o),o();const a=document.getElementById("schedule-tab"),d=document.getElementById("completion-target-tab"),c=document.getElementById("schedule-section"),l=document.getElementById("completion-target-section");function s(e){if(!(a&&d&&c&&l))return;const t=["bg-white","dark:bg-gray-600","text-gray-900","dark:text-white","shadow-sm"],n=["text-gray-600","dark:text-gray-400"];"schedule"===e?(a.classList.add(...t),a.classList.remove(...n),d.classList.remove(...t),d.classList.add(...n),c.classList.remove("hidden"),l.classList.add("hidden")):(d.classList.add(...t),d.classList.remove(...n),a.classList.remove(...t),a.classList.add(...n),l.classList.remove("hidden"),c.classList.add("hidden"))}a?.addEventListener("click",()=>s("schedule")),d?.addEventListener("click",()=>s("target")),s("schedule"),de(),B()}function de(){const e=document.getElementById("save-habit"),t=document.getElementById("habit-name-input"),n=document.getElementById("habit-category-select");if(!e||!t||!n)return;const o=t.value.trim().length>0&&""!==n.value;e.disabled=!o,e.classList.toggle("opacity-50",!o)}async function ce(){const t={name:document.getElementById("habit-name-input")?.value.trim(),categoryId:document.getElementById("habit-category-select")?.value||null,frequency:document.getElementById("frequency-select")?.value||"daily",anytime:document.getElementById("anytime-toggle")?.checked??!0,hour:document.getElementById("hour-select")?.value||"09",minute:document.getElementById("minute-select")?.value||"00",monthInterval:parseInt(document.getElementById("month-interval-select")?.value||"1",10),yearInterval:parseInt(document.getElementById("year-interval-select")?.value||"1",10),paused:document.getElementById("pause-habit-toggle")?.checked??!1,activeOnHolidays:document.getElementById("holidays-toggle")?.checked??!1,icon:f(),progress:{},skippedDates:[]};if(!t.name||!t.categoryId)return;const d=document.getElementById("completion-target-section"),c=document.getElementById("target-value-input"),l=d&&!d.classList.contains("hidden")&&c&&parseInt(c.value||"0",10)>0,s=document.getElementById("default-increment-input"),r=s?parseInt(s.value||"1",10):1,{getLocalMidnightISOString:i}=await e(async()=>{const{getLocalMidnightISOString:e}=await import("./chunk-CM0JCX04.js").then(e=>e.A);return{getLocalMidnightISOString:e}},__vite__mapDeps([3,2,0,1,4])),u={id:g(),name:t.name,categoryId:t.categoryId,frequency:t.frequency,createdAt:i(new Date),days:"weekly"===t.frequency?Array.from(L):"biweekly"===t.frequency?Array.from(k):void 0,scheduledTime:t.anytime?null:`${t.hour}:${t.minute}`,monthly:"monthly"===t.frequency?{interval:t.monthInterval,mode:S,dates:"each"===S?Array.from(x):void 0,combinations:"on"===S?Array.from(C):void 0}:void 0,months:"yearly"===t.frequency?Array.from(w):void 0,yearInterval:"yearly"===t.frequency?t.yearInterval:void 0,completed:!1,paused:t.paused,activeOnHolidays:t.activeOnHolidays,icon:f(),progress:t.progress,skippedDates:t.skippedDates};l?(u.target=parseInt(document.getElementById("target-value-input")?.value||"1",10),u.targetFrequency=document.getElementById("target-frequency-select")?.value||void 0,u.targetUnit=document.getElementById("target-unit-select")?.value||"none",u.defaultIncrement=r,delete u.days,delete u.monthly,delete u.months,delete u.yearInterval):(delete u.target,delete u.targetFrequency,delete u.targetUnit,delete u.defaultIncrement),n(ee?o.updateHabit(ee,u):o.addHabit(u)),ne(),a()}function le(){ee&&l({title:"Delete Habit?",message:"This habit will be permanently removed. This action cannot be undone.",okText:"Delete",onOK:()=>{n(o.deleteHabit(ee)),ne(),a()}})}const se=Object.freeze(Object.defineProperty({__proto__:null,closeAddHabitModal:ne,initializeHabitsForm:ae,openAddHabitModal:te,openEditHabitModal:function(n){const o=t().habits.find(e=>e.id===n);if(!o)return;ee=n,oe();const a=function(){const e=document.getElementById("delete-habit-btn");if(!e)return null;e.dataset.listenerAttached||(e.addEventListener("click",le),e.dataset.listenerAttached="true");return e}();a&&a.classList.remove("hidden"),document.getElementById("habit-modal-title").textContent="Edit Habit",document.getElementById("habit-modal-desc").textContent="Update habit details",document.getElementById("habit-name-input").value=o.name,document.getElementById("frequency-select").value=o.frequency;const c=document.getElementById("frequency-select");if(c){const e="number"==typeof o.target&&o.target>0;c.value=e?"daily":o.frequency}if(o.days){const e="biweekly"===o.frequency?k:L;o.days.forEach(t=>e.add(t)),document.querySelectorAll(".day-button").forEach(e=>{o.days.includes(parseInt(e.dataset.day,10))&&e.classList.add("selected")})}if(o.monthly&&(A(o.monthly.mode||"each"),document.getElementById("month-interval-select").value=o.monthly.interval||1,"each"===o.monthly.mode&&o.monthly.dates?(o.monthly.dates.forEach(e=>x.add(e)),document.querySelectorAll(".date-button").forEach(e=>{o.monthly.dates.includes(parseInt(e.dataset.date,10))&&e.classList.add("selected")})):"on"===o.monthly.mode&&o.monthly.combinations&&(o.monthly.combinations.forEach(e=>C.add(e)),P())),o.months&&(o.months.forEach(e=>w.add(e)),document.querySelectorAll(".month-button").forEach(e=>{o.months.includes(parseInt(e.dataset.month,10))&&e.classList.add("selected")}),document.getElementById("year-interval-select").value=o.yearInterval||1),o.scheduledTime){document.getElementById("anytime-toggle").checked=!1;const[e,t]=o.scheduledTime.split(":");document.getElementById("hour-select").value=e,document.getElementById("minute-select").value=t,document.getElementById("selected-time").textContent=o.scheduledTime,document.getElementById("time-selection").classList.remove("hidden")}document.getElementById("pause-habit-toggle").checked=!!o.paused,document.getElementById("holidays-toggle").checked=!!o.activeOnHolidays,b(o.icon||"ðŸ“‹");const l=document.getElementById("selected-icon-display");if(l&&(l.textContent=f()),o.target){document.getElementById("completion-target-section").classList.remove("hidden"),document.getElementById("target-frequency-select").value=o.targetFrequency||o.frequency,document.getElementById("target-value-input").value=o.target,document.getElementById("target-unit-select").value=o.targetUnit||"none";const e=document.getElementById("default-increment-input");e&&(e.value=o.defaultIncrement||1),document.getElementById("completion-target-tab")?.click()}e(()=>import("./categories-BW9gbI_x.js"),__vite__mapDeps([5,2,0,1,3,4])).then(e=>{e.populateCategoryDropdown();const t=document.getElementById("habit-category-select");t&&(t.value=o.categoryId,de())}),T(),X(),setTimeout(()=>{const e=document.getElementById("frequency-select")?.value;if("monthly"===e){const e=document.querySelectorAll(".date-button.selected"),t=document.getElementById("selected-dates-count");t&&(t.textContent=e.length)}if("yearly"===e){const e=document.querySelectorAll(".month-button.selected"),t=document.querySelectorAll(".yearly-date-button.selected"),n=document.getElementById("selected-months-count"),o=document.getElementById("selected-yearly-dates-count");n&&(n.textContent=e.length),o&&(o.textContent=t.length)}},100),d("add-habit-modal")}},Symbol.toStringTag,{value:"Module"}));let re=null,ie=[],ue=!1;async function me(){if(re)return re;try{return re=(await e(async()=>{const{default:e}=await import("https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/+esm");return{default:e}},[])).default,re}catch(t){return console.error("[reorder] failed to load SortableJS",t),null}}async function ye(){const e=await me();if(!e)return;ge(),ie=[];const t=document.querySelector("#habits-view #habits-list-container");if(t){const n=new e(t,{animation:150,handle:".category-drag-handle",draggable:".category-section",ghostClass:"sortable-ghost"});ie.push(n)}document.querySelectorAll("#habits-view .category-habits").forEach(t=>{const n=new e(t,{animation:150,handle:".habit-drag-handle",draggable:".habit-row",ghostClass:"sortable-ghost"});ie.push(n)})}function ge(){ie.forEach(e=>e.destroy()),ie=[]}function he(e){const t=e?"Done":"Reorder";document.querySelectorAll(".reorder-btn").forEach(e=>{e.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n    <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n  </svg><span class="ml-1.5">${t}</span>`,e.classList.add("font-semibold"),e.style.minWidth||(e.style.minWidth="90px")})}const Ee=Object.freeze(Object.defineProperty({__proto__:null,destroySortables:ge,ensureSortableLoaded:me,initSortables:ye,initializeReorder:function(){document.querySelectorAll(".reorder-btn").forEach(e=>{e.classList.add("font-semibold"),e.style.minWidth||(e.style.minWidth="90px")})},setReorderBtnLabel:he,toggleReorderMode:function(){ue=!ue;const t=document.querySelectorAll(".reorder-btn");if(he(ue),ue){ye(),document.body.classList.add("reorder-mode"),t.forEach(e=>e.classList.add("bg-purple-200")),document.querySelectorAll(".drag-handle").forEach(e=>e.classList.remove("hidden")),document.querySelectorAll(".edit-category-btn, .habit-actions, .edit-habit-btn").forEach(e=>e.classList.add("hidden"));document.querySelectorAll(".new-category-btn, .new-habit-btn").forEach(e=>{e.disabled=!0,e.classList.add("pointer-events-none","opacity-60","brightness-95")});const e=document.querySelector(".search-container input");e&&(e.disabled=!0,e.classList.add("pointer-events-none","opacity-60","brightness-95")),document.querySelectorAll(".tab-item").forEach(e=>{e.classList.add("pointer-events-none","opacity-50")}),document.querySelectorAll(".category-section").forEach(e=>{const t=e.querySelector(".category-habits"),n=e.querySelector(".expand-btn svg");t&&t.classList.add("hidden"),n&&n.classList.add("rotate-180")})}else{ge(),document.body.classList.remove("reorder-mode"),t.forEach(e=>e.classList.remove("bg-purple-200")),document.querySelectorAll(".drag-handle").forEach(e=>e.classList.add("hidden")),document.querySelectorAll(".edit-category-btn, .habit-actions, .edit-habit-btn").forEach(e=>e.classList.remove("hidden"));document.querySelectorAll(".new-category-btn, .new-habit-btn").forEach(e=>{e.disabled=!1,e.classList.remove("pointer-events-none","opacity-60","brightness-95")});const a=document.querySelector(".search-container input");a&&(a.disabled=!1,a.classList.remove("pointer-events-none","opacity-60","brightness-95")),document.querySelectorAll(".tab-item").forEach(e=>{e.classList.remove("pointer-events-none","opacity-50")}),function(){const t=[],a=[];if(document.querySelectorAll("#habits-view .category-section").forEach(e=>{const n=e.dataset.categoryId;n&&t.push(n),e.querySelectorAll(".habit-item").forEach(e=>{const t=e.dataset.habitId;t&&a.push(t)})}),!t.length&&!a.length)return;n(o.reorderCategories(t)),n(o.reorderHabits(a)),e(()=>import("./chunk-D8P7fKnl.js").then(e=>e.H),__vite__mapDeps([2,0,1,3,4])).then(e=>e.renderHabitsList())}()}}},Symbol.toStringTag,{value:"Module"}));export{se as H,Ee as a,ae as i};
